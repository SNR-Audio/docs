---
title: "Websockets "
icon: "bolt"
---

This API provides real-time text-to-speech conversion using WebSockets. It allows you to send text messages and receive audio data back in real-time.

## Endpoint

The WebSocket endpoint for the Text-to-Speech API is:

```
wss://tts.snr.audio/v1/speech/ws
```

## Ideal Usecase for the Websockets Endpoint
- The input text is being streamed or in chunks.
- Word-to-audio alignment information is required.


## Use our Streaming Endpoint wherever:
- The entire input text is available with you. 
- Prototyping or testing the API, rapidly converting text to speech



## Protocol

The WebSocket API uses a bidirectional protocol that encodes all messages as JSON objects.

## Streaming Input Text

The client can send messages with text input to the server. The messages should contain the following fields:

```json
{
    "text": "Your text here",
    "voice": "sarah",
    "similarity": 0.0,
    "expressiveness": 0.0,
    "pitch": 1.3,
    "speed": 1.0
}
```

- `text`: The input text to be converted to speech.
- `voice`: The voice to be used for the conversion. (e.g., "sarah")
- `similarity`: Similarity factor for voice settings.
- `expressiveness`: Expressiveness factor for voice settings.
- `pitch`: Pitch factor for voice settings.
- `speed`: Speed factor for voice settings.

## Streaming Output Audio

The server responds with a message containing the audio data:

```json
{
    "audio": "base64_encoded_audio_data",
    "isFinal": false
}
```

- `audio`: Base64 encoded audio data.
- `isFinal`: Indicates if the audio generation is complete.

## Example Script

The following example demonstrates how to use the WebSocket API to convert text to speech in real-time using Python:

```python
import asyncio
import websockets
import json
import base64
import nltk

async def stream_audio(audio_stream):
    # Your implementation for streaming audio

async def text_to_speech_input_streaming(text_iterator):
    uri = "wss://tts.snr.audio/v1/rest/speech/ws"
    async with websockets.connect(uri) as websocket:
        async def listen():
            # Your implementation for listening to audio data
        listen_task = asyncio.create_task(stream_audio(listen()))

        async for text in text_iterator:
            payload = {
                "text": text,
                "voice": "sarah",
                "similarity": 0.0,
                "expressiveness": 0.0,
                "pitch": 1.3,
                "speed": 1.0
            }
            await websocket.send(json.dumps(payload))

        await websocket.send(json.dumps({
            "text": " ",
            "voice": "sarah",
            "similarity": 0.0,
            "expressiveness": 0.0,
            "pitch": 1.3,
            "speed": 1.0
        }))

        await listen_task

async def chat_completion(text):
    response = nltk.sent_tokenize(text)
    async def text_iterator():
        for chunk in response:
            yield chunk

    await text_to_speech_input_streaming(text_iterator())

# Main execution
if __name__ == "__main__":
    user_query = """Your text here"""
    asyncio.run(chat_completion(user_query))
```


